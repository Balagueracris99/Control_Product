import{f as m}from"./chunk-3DDZNKYA.js";var d=class{};function w(s){return s&&typeof s.connect=="function"&&!(s instanceof m)}var o=(function(s){return s[s.REPLACED=0]="REPLACED",s[s.INSERTED=1]="INSERTED",s[s.MOVED=2]="MOVED",s[s.REMOVED=3]="REMOVED",s})(o||{}),_=class{viewCacheSize=20;_viewCache=[];applyChanges(c,i,t,n,h){c.forEachOperation((e,f,E)=>{let a,l;if(e.previousIndex==null){let C=()=>t(e,f,E);a=this._insertView(C,E,i,n(e)),l=a?o.INSERTED:o.REPLACED}else E==null?(this._detachAndCacheView(f,i),l=o.REMOVED):(a=this._moveView(f,E,i,n(e)),l=o.MOVED);h&&h({context:a?.context,operation:l,record:e})})}detach(){for(let c of this._viewCache)c.destroy();this._viewCache=[]}_insertView(c,i,t,n){let h=this._insertViewFromCache(i,t);if(h){h.context.$implicit=n;return}let e=c();return t.createEmbeddedView(e.templateRef,e.context,e.index)}_detachAndCacheView(c,i){let t=i.detach(c);this._maybeCacheView(t,i)}_moveView(c,i,t,n){let h=t.get(c);return t.move(h,i),h.context.$implicit=n,h}_maybeCacheView(c,i){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(c);else{let t=i.indexOf(c);t===-1?c.destroy():i.remove(t)}}_insertViewFromCache(c,i){let t=this._viewCache.pop();return t&&i.insert(t,c),t||null}};export{d as a,w as b,o as c,_ as d};
