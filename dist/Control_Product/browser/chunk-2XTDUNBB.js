import{a as z}from"./chunk-7HGVSUIZ.js";import{a as X,b as Y}from"./chunk-4AYKK4XH.js";import{c as x,d as P}from"./chunk-5LQPTCW5.js";import{a as T,b as N}from"./chunk-W5UQ6ECB.js";import{a as j,b as q,c as H,d as J,g as K,h as Q,k as U,l as W}from"./chunk-45557K5V.js";import{$a as c,$b as y,$c as L,Ca as _,Ia as C,Rc as S,Tc as u,Ua as m,Va as s,Vc as w,Wc as E,Ya as h,Yc as O,Za as e,_a as t,_c as F,bd as I,cd as k,fd as B,hd as D,ib as v,kb as b,kd as R,md as A,nd as G,od as V,wa as r,yb as n,zb as M}from"./chunk-3DDZNKYA.js";function $(o,a){if(o&1&&(e(0,"div",8)(1,"mat-icon"),n(2,"error_outline"),t(),e(3,"span"),n(4),t()()),o&2){let l=b();r(4),M(l.errorMessage)}}function ee(o,a){o&1&&(e(0,"mat-error"),n(1,"El correo es obligatorio"),t())}function te(o,a){o&1&&(e(0,"mat-error"),n(1,"Correo no v\xE1lido"),t())}function ie(o,a){o&1&&(e(0,"mat-error"),n(1,"La contrase\xF1a es obligatoria"),t())}function ne(o,a){o&1&&(e(0,"mat-error"),n(1,"M\xEDnimo 6 caracteres"),t())}function oe(o,a){o&1&&c(0,"mat-spinner",15)}function re(o,a){o&1&&n(0," Iniciar sesi\xF3n ")}var Z=class o{constructor(a,l,i){this.fb=a;this.auth=l;this.router=i;this.form=this.fb.nonNullable.group({email:["",[u.required,u.email]],password:["",[u.required,u.minLength(6)]]})}form;loading=!1;errorMessage="";hidePassword=!0;onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0,this.errorMessage="",this.auth.login(this.form.getRawValue()).subscribe({next:()=>{setTimeout(()=>{this.router.navigate(["/"])},0)},error:a=>{this.loading=!1,this.errorMessage=a.error?.message??"Error al iniciar sesi\xF3n. Verifica tus credenciales."},complete:()=>{this.loading=!1}})}static \u0275fac=function(l){return new(l||o)(_(I),_(z),_(x))};static \u0275cmp=C({type:o,selectors:[["app-login"]],decls:40,vars:10,consts:[[1,"login-page"],[1,"login-background"],[1,"login-content"],[1,"login-card"],[1,"login-brand"],[1,"login-logo"],[1,"login-subtitle"],[1,"login-form",3,"ngSubmit","formGroup"],[1,"login-error"],["appearance","outline",1,"full-width"],["matInput","","type","email","formControlName","email","placeholder","tu@email.com","autocomplete","email"],["matPrefix",""],["matInput","","formControlName","password","autocomplete","current-password",3,"type"],["mat-icon-button","","matSuffix","","type","button","aria-label","Mostrar u ocultar contrase\xF1a",3,"click"],["mat-flat-button","","color","primary","type","submit",1,"login-submit",3,"disabled"],["diameter","24"],[1,"login-footer"],["routerLink","/register"]],template:function(l,i){if(l&1&&(e(0,"div",0),c(1,"div",1),e(2,"div",2)(3,"mat-card",3)(4,"div",4)(5,"mat-icon",5),n(6,"inventory_2"),t(),e(7,"h1"),n(8,"Control de Inventarios"),t(),e(9,"p",6),n(10,"Inicia sesi\xF3n con tu cuenta"),t()(),e(11,"mat-card-content")(12,"form",7),v("ngSubmit",function(){return i.onSubmit()}),m(13,$,5,1,"div",8),e(14,"mat-form-field",9)(15,"mat-label"),n(16,"Correo electr\xF3nico"),t(),c(17,"input",10),e(18,"mat-icon",11),n(19,"email"),t(),m(20,ee,2,0,"mat-error"),m(21,te,2,0,"mat-error"),t(),e(22,"mat-form-field",9)(23,"mat-label"),n(24,"Contrase\xF1a"),t(),c(25,"input",12),e(26,"mat-icon",11),n(27,"lock"),t(),e(28,"button",13),v("click",function(){return i.hidePassword=!i.hidePassword}),e(29,"mat-icon"),n(30),t()(),m(31,ie,2,0,"mat-error"),m(32,ne,2,0,"mat-error"),t(),e(33,"button",14),m(34,oe,1,0,"mat-spinner",15)(35,re,1,0),t(),e(36,"p",16),n(37," \xBFNo tienes cuenta? "),e(38,"a",17),n(39,"Reg\xEDstrate"),t()()()()()()()),l&2){let d,g,p,f;r(12),h("formGroup",i.form),r(),s(i.errorMessage?13:-1),r(7),s((d=i.form.get("email"))!=null&&d.hasError("required")&&((d=i.form.get("email"))!=null&&d.touched)?20:-1),r(),s((g=i.form.get("email"))!=null&&g.hasError("email")&&((g=i.form.get("email"))!=null&&g.touched)?21:-1),r(4),h("type",i.hidePassword?"password":"text"),r(5),M(i.hidePassword?"visibility_off":"visibility"),r(),s((p=i.form.get("password"))!=null&&p.hasError("required")&&((p=i.form.get("password"))!=null&&p.touched)?31:-1),r(),s((f=i.form.get("password"))!=null&&f.hasError("minlength")&&((f=i.form.get("password"))!=null&&f.touched)?32:-1),r(),h("disabled",i.loading),r(),s(i.loading?34:35)}},dependencies:[y,k,O,S,w,E,L,F,P,R,B,D,Q,K,j,q,H,J,W,U,V,G,A,N,T,Y,X],styles:['.login-page[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:var(--app-spacing);position:relative;overflow:hidden}.login-background[_ngcontent-%COMP%]{position:absolute;inset:0;background:linear-gradient(135deg,var(--mat-sys-primary-container) 0%,var(--mat-sys-tertiary-container) 100%);opacity:.4;z-index:0}.login-background[_ngcontent-%COMP%]:after{content:"";position:absolute;inset:0;background-image:radial-gradient(circle at 20% 80%,var(--mat-sys-primary) 0%,transparent 50%),radial-gradient(circle at 80% 20%,var(--mat-sys-tertiary) 0%,transparent 40%);opacity:.08}.login-content[_ngcontent-%COMP%]{position:relative;z-index:1;width:100%;max-width:420px}.login-card[_ngcontent-%COMP%]{border-radius:var(--app-radius-lg);box-shadow:var(--app-shadow-lg);overflow:hidden}.login-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding:0 1.5rem 1.5rem}.login-brand[_ngcontent-%COMP%]{text-align:center;padding:2rem 1.5rem 0}.login-logo[_ngcontent-%COMP%]{font-size:3.5rem;width:3.5rem;height:3.5rem;color:var(--mat-sys-primary);margin-bottom:.75rem}.login-brand[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:var(--mat-sys-on-surface)}.login-subtitle[_ngcontent-%COMP%]{margin:.25rem 0 0;font-size:.9375rem;color:var(--mat-sys-on-surface-variant)}.login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem;margin-top:1.5rem}.full-width[_ngcontent-%COMP%]{width:100%}.login-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.75rem 1rem;margin-bottom:.5rem;background:var(--mat-sys-error-container);color:var(--mat-sys-on-error-container);border-radius:var(--app-radius-sm);font-size:.875rem}.login-error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.25rem;width:1.25rem;height:1.25rem;flex-shrink:0}.login-submit[_ngcontent-%COMP%]{margin-top:1rem;height:48px;font-size:1rem;font-weight:500}.login-submit[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin:0 auto}.login-footer[_ngcontent-%COMP%]{margin:1.25rem 0 0;text-align:center;font-size:.875rem;color:var(--mat-sys-on-surface-variant)}.login-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--mat-sys-primary);font-weight:500;text-decoration:none}.login-footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}']})};export{Z as Login};
