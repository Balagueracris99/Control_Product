import{a as D}from"./chunk-7HGVSUIZ.js";import{a as Z,b as $}from"./chunk-SKKXDCFB.js";import{a as W,b as X}from"./chunk-4AYKK4XH.js";import{c as x,d as w}from"./chunk-5LQPTCW5.js";import"./chunk-DQFV7RUH.js";import"./chunk-SB62MEXX.js";import{a as H,b as Y,g as J,h as K,k as Q,l as U}from"./chunk-45557K5V.js";import{$a as p,$b as R,$c as P,Ca as c,Ia as v,Rc as F,Tc as d,Ua as l,Va as m,Vc as y,Wc as T,Ya as M,Yc as k,Za as i,_a as r,_c as I,bd as B,cd as N,fd as O,gd as q,hd as A,ib as S,id as G,jd as L,kb as b,kd as j,nd as V,od as z,wa as a,yb as o,zb as E}from"./chunk-3DDZNKYA.js";function te(e,n){if(e&1&&(i(0,"div",3),o(1),r()),e&2){let s=b();a(),E(s.errorMessage)}}function re(e,n){e&1&&(i(0,"mat-error"),o(1,"El nombre es obligatorio"),r())}function ie(e,n){e&1&&(i(0,"mat-error"),o(1,"M\xEDnimo 2 caracteres"),r())}function oe(e,n){e&1&&(i(0,"mat-error"),o(1,"El correo es obligatorio"),r())}function ne(e,n){e&1&&(i(0,"mat-error"),o(1,"Correo no v\xE1lido"),r())}function ae(e,n){e&1&&(i(0,"mat-error"),o(1,"La contrase\xF1a es obligatoria"),r())}function le(e,n){e&1&&(i(0,"mat-error"),o(1,"M\xEDnimo 6 caracteres"),r())}function me(e,n){e&1&&p(0,"mat-spinner",9)}function se(e,n){e&1&&o(0," Registrarse ")}var ee=class e{constructor(n,s,t,u){this.fb=n;this.auth=s;this.router=t;this.snackBar=u;this.form=this.fb.nonNullable.group({name:["",[d.required,d.minLength(2)]],email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]]})}form;loading=!1;errorMessage="";onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.loading=!0,this.errorMessage="",this.auth.register(this.form.getRawValue()).subscribe({next:()=>{this.snackBar.open("Te has registrado correctamente.","Cerrar",{duration:4e3,horizontalPosition:"center",verticalPosition:"top"}),this.router.navigate(["/"])},error:n=>{this.loading=!1,this.errorMessage=n.error?.message??"Error al registrarse. Intenta de nuevo."},complete:()=>{this.loading=!1}})}static \u0275fac=function(s){return new(s||e)(c(B),c(D),c(x),c(Z))};static \u0275cmp=v({type:e,selectors:[["app-register"]],decls:35,vars:10,consts:[[1,"register-container"],[1,"register-card"],[1,"register-form",3,"ngSubmit","formGroup"],[1,"error-message"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","placeholder","Tu nombre completo","autocomplete","name"],["matInput","","type","email","formControlName","email","placeholder","tu@email.com"],["matInput","","type","password","formControlName","password","autocomplete","new-password"],["mat-flat-button","","color","primary","type","submit",1,"full-width",3,"disabled"],["diameter","24"],[1,"login-link"],["routerLink","/login"]],template:function(s,t){if(s&1&&(i(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title"),o(4,"Crear cuenta"),r(),i(5,"mat-card-subtitle"),o(6,"Reg\xEDstrate para usar el control de inventarios"),r()(),i(7,"mat-card-content")(8,"form",2),S("ngSubmit",function(){return t.onSubmit()}),l(9,te,2,1,"div",3),i(10,"mat-form-field",4)(11,"mat-label"),o(12,"Nombre"),r(),p(13,"input",5),l(14,re,2,0,"mat-error"),l(15,ie,2,0,"mat-error"),r(),i(16,"mat-form-field",4)(17,"mat-label"),o(18,"Correo electr\xF3nico"),r(),p(19,"input",6),l(20,oe,2,0,"mat-error"),l(21,ne,2,0,"mat-error"),r(),i(22,"mat-form-field",4)(23,"mat-label"),o(24,"Contrase\xF1a"),r(),p(25,"input",7),l(26,ae,2,0,"mat-error"),l(27,le,2,0,"mat-error"),r(),i(28,"button",8),l(29,me,1,0,"mat-spinner",9)(30,se,1,0),r(),i(31,"p",10),o(32," \xBFYa tienes cuenta? "),i(33,"a",11),o(34,"Iniciar sesi\xF3n"),r()()()()()()),s&2){let u,f,g,_,h,C;a(8),M("formGroup",t.form),a(),m(t.errorMessage?9:-1),a(5),m((u=t.form.get("name"))!=null&&u.hasError("required")&&((u=t.form.get("name"))!=null&&u.touched)?14:-1),a(),m((f=t.form.get("name"))!=null&&f.hasError("minlength")&&((f=t.form.get("name"))!=null&&f.touched)?15:-1),a(5),m((g=t.form.get("email"))!=null&&g.hasError("required")&&((g=t.form.get("email"))!=null&&g.touched)?20:-1),a(),m((_=t.form.get("email"))!=null&&_.hasError("email")&&((_=t.form.get("email"))!=null&&_.touched)?21:-1),a(5),m((h=t.form.get("password"))!=null&&h.hasError("required")&&((h=t.form.get("password"))!=null&&h.touched)?26:-1),a(),m((C=t.form.get("password"))!=null&&C.hasError("minlength")&&((C=t.form.get("password"))!=null&&C.touched)?27:-1),a(),M("disabled",t.loading),a(),m(t.loading?29:30)}},dependencies:[R,N,k,F,y,T,P,I,w,j,O,A,L,G,q,K,J,H,Y,U,Q,z,V,X,W,$],styles:[".register-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;padding:1rem;background:var(--mat-sys-surface-container-low, #f5f5f5)}.register-card[_ngcontent-%COMP%]{width:100%;max-width:400px}.register-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.full-width[_ngcontent-%COMP%]{width:100%}.error-message[_ngcontent-%COMP%]{color:var(--mat-sys-error);font-size:.875rem;margin-bottom:.5rem}.login-link[_ngcontent-%COMP%]{margin-top:1rem;text-align:center;font-size:.875rem}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--mat-sys-primary)}"]})};export{ee as Register};
